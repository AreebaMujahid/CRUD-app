<!DOCTYPE html>
<html>
<head>
<title> my new page </title>
<link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>
    <div class="main">
        <form>
            <label for="name"> Name: </label>
            <input type="text" id="name" name="name"><br>

            <label for="email"> Email: </label>
            <input type="text" id="email" name="email"><br>

            <label for="phoneno"> Phone no: </label>
            <input type="text" id="phone" name="phone"><br>

            <button id="btn" onclick="addDataToLocalStorage(event)"> add data </button>


        </form>

        <br>
        <table id="table">
            <tr>
                <td> Name </td>
                <td> Email </td>
                <td> Phone no </td>
                <td> Actions </td>
                

            </tr>

        </table>

    </div>

    <script>


        function clearInputs()
        {
             document.getElementById("name").value = "";
             document.getElementById("email").value = "";
             document.getElementById("phone").value = "";
        }
        
        function saveDataToLocalStorage(data){
            localStorage.setItem('tableData',JSON.stringify(data));
        }

        function loadDataFromLocalStorage() {
            let storedData = JSON.parse(localStorage.getItem('tableData')) || [];

            // Loop through the stored data and add each entry to the table
            storedData.forEach(function(event) {
                addDataToTable(event.name,event.email,event.phone);
            });
        }
        
        function addDataToLocalStorage(event){
            
            let name = document.getElementById("name").value;     
            let email = document.getElementById("email").value;
            let phone = document.getElementById("phone").value;

            
            let StoredData = JSON.parse(localStorage.getItem('tableData')) || [];
            console.log(StoredData);
            StoredData.push({ name: name, email: email, phone: phone });
            saveDataToLocalStorage(StoredData);
            addDataToTable(name,email,phone);


        }
        function addDataToTable(name,email,phone)
        {
            
            
            
            let table = document.getElementById("table");
            let newrow = table.insertRow(table.rows.length);      
            newrow.insertCell(0).innerHTML = name;
            newrow.insertCell(1).innerHTML = email;
            newrow.insertCell(2).innerHTML = phone;
            newrow.insertCell(3).innerHTML = '<button onclick="editData(this)">Edit</button>' + '<button onclick="deleteData(this)">Delete</button>'
            
            

        }
        function deleteData(button)
        {
            let row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);



        }
        function editData(button)    
        {
            
            let row = button.parentNode.parentNode;       
        
            
            let name = row.cells[0];
            let email = row.cells[1];
            let phone = row.cells[2];
            
            let updatedName = prompt("Enter updated name :" , name.innerHTML);   
            let updatedEmail = prompt("Enter updated email" , email.innerHTML);
            let updatedPhone = prompt("Enter updated phone no" , phone.innerHTML);

            name.innerHTML  = updatedName;
            email.innerHTML = updatedEmail;
            phone.innerHTML = updatedPhone;

        
        
        
        }
        window.onload = loadDataFromLocalStorage;

    </script> 


</body>
</html>
